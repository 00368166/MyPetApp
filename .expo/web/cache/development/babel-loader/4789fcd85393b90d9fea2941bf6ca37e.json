{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState, createContext, useContext } from 'react';\nimport { supabase } from \"../lib/initSupabase\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar AuthContext = createContext({});\n\nvar AuthProvider = function AuthProvider(props) {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      session = _useState4[0],\n      setSession = _useState4[1];\n\n  useEffect(function () {\n    var session = supabase.auth.session();\n    setSession(session);\n    setUser(session ? true : false);\n\n    var _supabase$auth$onAuth = supabase.auth.onAuthStateChange(function _callee(event, session) {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log(\"Supabase auth event: \" + event);\n              setSession(session);\n              setUser(session ? true : false);\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }),\n        authListener = _supabase$auth$onAuth.data;\n\n    return function () {\n      authListener.unsubscribe();\n    };\n  }, [user]);\n  return _jsx(AuthContext.Provider, {\n    value: {\n      user: user,\n      session: session\n    },\n    children: props.children\n  });\n};\n\nexport { AuthContext, AuthProvider };\nexport var UserContext = createContext({\n  user: null,\n  session: null\n});\nexport var UserContextProvider = function UserContextProvider(props) {\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      session = _useState6[0],\n      setSession = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      user = _useState8[0],\n      setUser = _useState8[1];\n\n  useEffect(function () {\n    var _session$user;\n\n    var session = supabase.auth.session();\n    setSession(session);\n    setUser((_session$user = session == null ? void 0 : session.user) != null ? _session$user : null);\n\n    var _supabase$auth$onAuth2 = supabase.auth.onAuthStateChange(function _callee2(event, session) {\n      var _session$user2;\n\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log(\"Supabase auth event: \" + event);\n              setSession(session);\n              setUser((_session$user2 = session == null ? void 0 : session.user) != null ? _session$user2 : null);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }),\n        authListener = _supabase$auth$onAuth2.data;\n\n    return function () {\n      authListener.unsubscribe();\n    };\n  }, []);\n  var value = {\n    session: session,\n    user: user\n  };\n  return _jsx(UserContext.Provider, _objectSpread({\n    value: value\n  }, props));\n};\nexport var useUser = function useUser() {\n  var context = useContext(UserContext);\n\n  if (context === undefined) {\n    throw new Error(\"useUser must be used within a UserContextProvider.\");\n  }\n\n  return context;\n};\nexport var sesion_activa = function sesion_activa() {\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      session = _useState10[0],\n      setSession = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      user = _useState12[0],\n      setUser = _useState12[1];\n\n  useEffect(function () {\n    var _session$user3;\n\n    var session = supabase.auth.session();\n    setSession(session);\n    setUser((_session$user3 = session == null ? void 0 : session.user) != null ? _session$user3 : null);\n\n    var _supabase$auth$onAuth3 = supabase.auth.onAuthStateChange(function _callee3(event, session) {\n      var _session$user4;\n\n      return _regeneratorRuntime.async(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              console.log(\"Supabase auth event: \" + event);\n              setSession(session);\n              setUser((_session$user4 = session == null ? void 0 : session.user) != null ? _session$user4 : null);\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }),\n        authListener = _supabase$auth$onAuth3.data;\n\n    return function () {\n      authListener.unsubscribe();\n    };\n  }, []);\n  var value = {\n    session: session,\n    user: user\n  };\n  return value;\n};","map":{"version":3,"names":["React","useEffect","useState","createContext","useContext","supabase","AuthContext","AuthProvider","props","user","setUser","session","setSession","auth","onAuthStateChange","event","console","log","authListener","data","unsubscribe","children","UserContext","UserContextProvider","value","useUser","context","undefined","Error","sesion_activa"],"sources":["D:/anahuac/verano/mobile/myapp/MyPet/MyPetApp/src/provider/AuthProvider.tsx"],"sourcesContent":["import React, { useEffect, useState, createContext, useContext } from 'react';\n\nimport { supabase } from '../lib/initSupabase';\nimport { Session, User } from '@supabase/supabase-js';\ntype ContextProps = {\n\tuser: null | boolean;\n\tsession: Session | null;\n};\n\nconst AuthContext = createContext<Partial<ContextProps>>({});\n\ninterface Props {\n\tchildren: React.ReactNode;\n}\n\nconst AuthProvider = (props: Props) => {\n\t// user null = loading\n\tconst [user, setUser] = useState<null | boolean>(null);\n\tconst [session, setSession] = useState<Session | null>(null);\n\n\tuseEffect(() => {\n\t\tconst session = supabase.auth.session();\n\t\tsetSession(session);\n\t\tsetUser(session ? true : false);\n\t\tconst { data: authListener } = supabase.auth.onAuthStateChange(\n\t\t\tasync (event, session) => {\n\t\t\t\tconsole.log(`Supabase auth event: ${event}`);\n\t\t\t\tsetSession(session);\n\t\t\t\tsetUser(session ? true : false);\n\t\t\t}\n\t\t);\n\t\treturn () => {\n\t\t\tauthListener!.unsubscribe();\n\t\t};\n\t}, [user]);\n\n\treturn (\n\t\t<AuthContext.Provider\n\t\t\tvalue={{\n\t\t\t\tuser,\n\t\t\t\tsession,\n\t\t\t}}\n\t\t>\n\t\t\t{props.children}\n\t\t</AuthContext.Provider>\n\t);\n};\n\nexport { AuthContext, AuthProvider };\n\nexport const UserContext = createContext<{ user: User | null; session: Session | null }>({\n\tuser: null,\n\tsession: null,\n  })\n  \n  export const UserContextProvider = (props: any) => {\n\tconst [session, setSession] = useState<Session | null>(null)\n\tconst [user, setUser] = useState<User | null>(null)\n  \n\tuseEffect(() => {\n\t  const session = supabase.auth.session()\n\t  setSession(session)\n\t  setUser(session?.user ?? null)\n\t  const { data: authListener } = supabase.auth.onAuthStateChange(async (event, session) => {\n\t\tconsole.log(`Supabase auth event: ${event}`)\n\t\tsetSession(session)\n\t\tsetUser(session?.user ?? null)\n\t  })\n  \n\t  return () => {\n\t\tauthListener!.unsubscribe()\n\t  }\n\t  // eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [])\n  \n\tconst value = {\n\t  session,\n\t  user,\n\t}\n\treturn <UserContext.Provider value={value} {...props} />\n  }\n  \n  export const useUser = () => {\n\tconst context = useContext(UserContext)\n\tif (context === undefined) {\n\t  throw new Error(`useUser must be used within a UserContextProvider.`)\n\t}\n\treturn context\n  }\n  \n\n  export const sesion_activa = () => {\n\tconst [session, setSession] = useState<Session | null>(null)\n\tconst [user, setUser] = useState<User | null>(null)\n  \n\tuseEffect(() => {\n\t  const session = supabase.auth.session()\n\t  setSession(session)\n\t  setUser(session?.user ?? null)\n\t  const { data: authListener } = supabase.auth.onAuthStateChange(async (event, session) => {\n\t\tconsole.log(`Supabase auth event: ${event}`)\n\t\tsetSession(session)\n\t\tsetUser(session?.user ?? null)\n\t  })\n  \n\t  return () => {\n\t\tauthListener!.unsubscribe()\n\t  }\n\t  // eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [])\n  \n\tconst value = {\n\t  session,\n\t  user,\n\t}\n\treturn value;\n  }"],"mappings":"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"},"metadata":{},"sourceType":"module"}